[TOC]



##### 创建方式

第一种方式是直接通过`/正则表达式/`写出来，第二种方式是通过`new RegExp('正则表达式')`创建一个RegExp对象。

~~~js
//   /表达式/字面量创建
var re = /ABC\-001/;
//   new RegExp对象创建
var re1 = new RegExp("ABC\\-001");
~~~

##### test

作用：判断正则表达式是否匹配

使用RegExp对象上的 **test("需要匹配的字符串")** 方法判断是否匹配，返回布尔值。

~~~js
var a = "ABC-001"
re.test(a); //true
~~~

##### exec

作用：提取字符串中符合匹配的一些字符串分组。

##### 规则

~~~js
\d  匹配数字
\w  匹配字母或数字
\s  匹配空格
[]  匹配范围内的字符
.   匹配除换行符以外的任意字符

*   表示任意个字符数
+   表示至少一个字符
？  表示0个或一个字符
{n} 表示n个字符
{2,10} 表示2-10个字符

A|a  匹配A或a
^    表示行的开头 如^\d  数字开头
$    表示行的结束 如\d$  数字结尾

正则匹配默认是贪婪匹配，匹配尽可能多的字符
+？  采用非贪婪匹配，匹配尽量少的字符 如 \d+?

g   表示全局搜索

i   表示忽略大小写
m   表示执行多行匹配
~~~



##### 全局搜索

g   表示全局搜索

~~~js
var r1 = /2/g;
// 等价于:
var r2 = new RegExp('2', 'g');
r1.test("2020202020");//设置全局搜索后，每次调用test或者exec，正则表达式都会更新自己的lastIndex属性，这个属性表示上次匹配到的索引，从1开始的，不是从0
console.log(r1.lastIndex);//1
r1.exec("2020202020");
console.log(r1.lastIndex);//3
~~~

全局匹配可以多次执行**exec( "")**方法来搜索一个匹配的字符串。

###### 注意

**设置全局搜索后，每次调用test或者exec**，正则表达式都会更新自己的lastIndex属性，这个属性表示上次匹配到的索引，**从1开始的，不是从0**



##### 使用场景

###### 切分字符串

~~~js
//split切分字符串时  split(/表达式/);
'a b   c'.split(); // ['a b  c']
'a b   c'.split(''); // [a,'',b,'','',c]
'a b   c'.split(' ');   //[a,b,"","",c]
'a b   c'.split(/\s+/); //  [a,b,c]
'a, b , c  d'.split(/[\s\,]+/); //[a,b,c,d]
~~~

###### 分组

表达式中用 **( )** 括号表示的就是要提取的分组，定义了组，就可以在RegExp对象上用 **exec( )** 方法提取出子串来。

**exec('')** 方法匹配成功后 ，返回一个数组：

**[匹配到的整个字符串，子串1，子串2]**

匹配失败返回 **null**

~~~js
var re = /^(\d{3})-(\d{3,8})$/;
re.exec('010-12345'); // ['010-12345', '010', '12345']
re.exec('010 12345'); // null

decodeURIComponent(JSON.parse(localStorage.getItem("__q__"))).split(/[|][/flow]/)
~~~

##### 速查表

###### 修饰符

- `g`：global 全文搜索，不添加，搜索到第一个匹配停止
- `i`：ignore case 忽略大小写，默认大小写敏感
- `m`：multiple lines 多行搜索
- `u`：Unicode，将模式视为 Unicode 序列点的序列
- `y`：粘性匹配，仅匹配目标字符串中此正则表达式的 lastindex 属性指示的索引
- `s`: dotAll 模式，匹配任何字符(包括终止符 '\n')

###### 边界

| 符号 | 描述             | 例子     | 能匹配   | 不能匹配 |
| :--- | :--------------- | :------- | :------- | :------- |
| `^`  | 行首或字符串开始 | `^yo`    | yo       | ayo      |
| `$`  | 行末或字符串结束 | `yo$`    | yo       | yop      |
| `\b` | 单词边界         | `\byo\b` | mu yo mu | muyomu   |
| `\B` | 非单词边界       | `\Byo\B` | muyomu   | mu yo mu |

###### 预查

| 符号       | 描述                                                         | 例子        | 能匹配 | 不能匹配 |
| :--------- | :----------------------------------------------------------- | :---------- | :----- | :------- |
| `(?=xxx)`  | 正向肯定预查，从任何匹配xxx的字符串开始处匹配查找字符串      | `yo(?=o)`   | yoo    | yo       |
| `(?!xxx)`  | 正向否定预查，从任何不匹配pattern的字符串开始处匹配查找字符串 | `yo(?!o)`   | yo     | yoo      |
| `(?<=xxx)` | 反向肯定预查，与正向肯定预查类拟，只是方向相反，js暂不支持   | `(?<=y)o`   | yo     | yoo      |
| `(?<!xxx)` | 反向否定预查，与正向否定预查类拟，只是方向相反，js暂不支持   | `(?<!goo)d` | mood   | good     |

###### 通配

| 符号    | 描述                          | 例子     | 能匹配        | 不能匹配 |
| :------ | :---------------------------- | :------- | :------------ | :------- |
| `[ ]`   | 字符集合                      | `[ace]`  | a, c, e       | d        |
| `[ - ]` | 字符范围                      | `[a-c]`  | a, b, c       | d        |
| `[^ ]`  | 不包含的字符集合              | `[^abc]` | d, e          | a, b, c  |
| `.`     | 匹配除断行外的任何字符        | `yo.`    | yoo, yop, yoh | yo       |
| `\s`    | 空白字符，等于`[\n\r\f\t ]`   | `la\sla` | la la         | lala     |
| `\S`    | 非空白字符，等于`[^\n\r\f\t]` | `la\Sla` | la+la         | la la    |
| `\d`    | 数字                          | `\d{2}`  | 23            | 1a       |
| `\D`    | 非数字                        | `\D{3}`  | yoo, abc      | yo1      |
| `\w`    | 单词，等于`[a-z-A-Z0-9_]`     | `\w{4}`  | v123          | v12.3    |
| `\W`    | 非单词，等于`[^a-z-A-Z0-9_]`  | `.$%?`   | .$%?          | .ab?     |

###### 特殊字符

| 特殊字符 | 描述       |
| :------- | :--------- |
| `\n`     | 断行       |
| `\r`     | 回车符     |
| `\t`     | 制表符     |
| `\v`     | 垂直制表符 |
| `\f`     | 换页       |
| `[\b]`   | 退格       |

###### 其他

| 符号      | 描述                      | 例子       | 能匹配     | 不能匹配 |
| :-------- | :------------------------ | :--------- | :--------- | :------- |
| `|`       | 或，其一                  | `(a|b)`    | a, b       | c        |
| `(xxx)`   | 匹配xxx并获取这一匹配     | `yo(o|p)`  | yoo 或 yop | yoh      |
| `(?:xxx)` | 匹配xxx但不获取这一匹配   | `y(?:o)`   | yo         | ya       |
| `+`       | 重复1次或多次             | `yo+`      | yo, yooo   | y        |
| `*`       | 重复0次或多次             | `yo*`      | y, yoo     | yop      |
| `?`       | 出现0次或1次              | `yo?`      | y, yo      | ye       |
| `??`      | ?的懒惰模式，尽可能少匹配 | `yoo??`    | yo         | yoo      |
| `+?`      | +的懒惰模式               | `yo+?`     | yo         | yoo      |
| `*?`      | *的懒惰模式               | `yo*?`     | y          | yo       |
| `{n}`     | 重复n次                   | `yo{2}`    | yoo        | yooo     |
| `{n,m}`   | 重复n到m次                | `yo{1, 3}` | yo,yooo    | yoooo    |
| `{n,}`    | 重复至少n次               | `yo{2,}`   | yoo, yooo  | yo       |



##### 与正则有关的方法

###### 1.search()

search()的参数是一个正则表达式，返回第一个与之匹配的子串的起始位置，如果找不到匹配的子串，它将返回-1。举个例子:

```jsx
"JavaScript".search(/script/i);
 // 返回4
```

如果search()的参数不是正则表达式，首先会通过RegExp构造函数将它转换为正则表达式，search()方法**不支持全局检索**，因为会忽略正则表达式参数中的修饰符g。

###### 2.replace()

该方法用以执行检索和替换操作。其中第一个参数是一个正则表达式，第二个参数是要进行替换的字符串。如果正则表达式中设置了修饰符g，那么源字符串中所有与模式匹配的子串都将替换成第二个参数指定的字符串；如果不带修饰符g，则只替换所匹配的第一个子串。如果replace()的第一个参数是字符串而不是正则表达式，那么replace()将直接搜索这个字符串，而不会向search()一样先转换为正则表达式。举个例子:

```jsx
str.replace(/javascript/gi,"JavaScript");
//将所有不区分大小写的javascript替换成JavaScript
```

###### 3.match()

match()方法的唯一参数就是一个正则表达式，**返回的是一个由匹配结果组成的数组**。如果该正则表达式设置了修饰符g，则该方法返回的数组包含字符串的所有匹配结果。比如：

```bash
"1 plus 2 equals 3".match(/\d+/g)
// 返回 ["1","2","3"]
```

如果没有设置修饰符g，那么就不会进行全局检索，只检索第一个匹配。但是**即使match()执行的不是全局检索，也返回一个数组**。这时，数组的第一个元素就是匹配的字符串，余下的元素则是正则表达式中用圆括号括起来的子表达式。如果没有，则返回`null`。

###### 4.split()

该方法用以将调用它的字符串拆分为一个子串组成的数组，分隔符就是方法的参数。例如:

```bash
'123456'.split('');
// 将'123456'使用空字符串''进行分割
// 返回["1", "2", "3", "4", "5", "6"]
```

split()的参数也可以是一个正则表达式。

##### 正则在线测试

https://regexr.com/

https://devtoolcafe.com/

```
xxx = item.translate(str.maketrans({"b(\"": '', "\")": '', "b(\'": '', "\')": ''}))
```
